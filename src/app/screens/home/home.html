@if (!isLoginPage) {
<div class="min-h-screen bg-gray-100 font-sans">
  <header class="bg-white h-16 px-6 flex w-full justify-between items-center shadow-sm sticky top-0 z-10">
    <div class="flex items-center">
      <div class="text-2xl font-bold text-gray-500 tracking-wider">
        <span class="text-red-500 font-extrabold">L</span>et's Our Brain Play
      </div>
    </div>

    <div class="flex items-center gap-6">
      <div class="relative cursor-pointer group">
        <svg class="text-gray-700 w-6 h-6 group-hover:text-gray-900 transition-all duration-200" fill="currentColor"
          viewBox="-1.5 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path
            d="m19.945 15.512c-.8-.786-1.619-1.6-1.619-5.44-.005-3.881-2.832-7.101-6.539-7.717l-.046-.006c.165-.237.263-.531.263-.848 0-.828-.672-1.5-1.5-1.5s-1.5.672-1.5 1.5c0 .317.098.611.266.853l-.003-.005c-3.753.623-6.579 3.843-6.584 7.723v.001c0 3.84-.822 4.655-1.619 5.44-.653.577-1.062 1.417-1.062 2.352 0 1.732 1.404 3.135 3.135 3.135h.007 4.36c0 1.657 1.343 3 3 3s3-1.343 3-3h4.363.007c1.732 0 3.135-1.404 3.135-3.135 0-.935-.409-1.775-1.059-2.349l-.003-.003zm-9.441 6.613c-.621-.001-1.124-.504-1.125-1.125h2.251c-.001.621-.505 1.125-1.126 1.125zm7.36-3.376h-14.726c-.487-.003-.881-.398-.881-.886 0-.243.098-.463.256-.623 1.34-1.34 2.418-2.612 2.418-7.17 0-3.077 2.495-5.572 5.572-5.572s5.572 2.495 5.572 5.572c0 4.578 1.089 5.84 2.418 7.17.158.16.256.38.256.623 0 .488-.394.883-.881.886z" />
        </svg>
        <span
          class="absolute -top-1 -right-1 rounded-full bg-red-500 w-5 h-5 text-white text-xs flex items-center justify-center font-medium shadow-sm animate-pulse">2</span>
      </div>

      <div class="cursor-pointer relative group">
        <div class="flex items-center gap-2 p-1.5 rounded-full group-hover:bg-gray-100 transition-all duration-200">
          <svg class="w-8 h-8 text-gray-700" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M0.877014 7.49988C0.877014 3.84219 3.84216 0.877045 7.49985 0.877045C11.1575 0.877045 14.1227 3.84219 14.1227 7.49988C14.1227 11.1575 11.1575 14.1227 7.49985 14.1227C3.84216 14.1227 0.877014 11.1575 0.877014 7.49988ZM7.49985 1.82704C4.36683 1.82704 1.82701 4.36686 1.82701 7.49988C1.82701 8.97196 2.38774 10.3131 3.30727 11.3213C4.19074 9.94119 5.73818 9.02499 7.50023 9.02499C9.26206 9.02499 10.8093 9.94097 11.6929 11.3208C12.6121 10.3127 13.1727 8.97172 13.1727 7.49988C13.1727 4.36686 10.6328 1.82704 7.49985 1.82704ZM10.9818 11.9787C10.2839 10.7795 8.9857 9.97499 7.50023 9.97499C6.01458 9.97499 4.71624 10.7797 4.01845 11.9791C4.97952 12.7272 6.18765 13.1727 7.49985 13.1727C8.81227 13.1727 10.0206 12.727 10.9818 11.9787ZM5.14999 6.50487C5.14999 5.207 6.20212 4.15487 7.49999 4.15487C8.79786 4.15487 9.84999 5.207 9.84999 6.50487C9.84999 7.80274 8.79786 8.85487 7.49999 8.85487C6.20212 8.85487 5.14999 7.80274 5.14999 6.50487ZM7.49999 5.10487C6.72679 5.10487 6.09999 5.73167 6.09999 6.50487C6.09999 7.27807 6.72679 7.90487 7.49999 7.90487C8.27319 7.90487 8.89999 7.27807 8.89999 6.50487C8.89999 5.73167 8.27319 5.10487 7.49999 5.10487Z"
              fill="currentColor" />
          </svg>
        </div>
      </div>
    </div>
  </header>

  <div class="flex flex-col md:flex-row h-[calc(100vh-4rem)]">
    <aside class="w-full md:w-60 bg-gray-100 p-2 space-y-1 overflow-y-auto">
      @for (m of menuItems; track $index; let parentIndex = $index) {
      <div class="rounded-lg transition-all duration-200 overflow-hidden">
        <div (click)="m.submenu.length > 0 ? (m.isSelected = !m.isSelected) : selectMenu(parentIndex)"
          [ngClass]="m.isSelected ? 'bg-blue-200 text-blue-800' : 'hover:bg-blue-50'"
          class="px-4 flex justify-between items-center h-12 rounded-lg cursor-pointer transition-all duration-200">
          <div class="flex items-center gap-3">
            <img [src]="m.icon" class="h-5 w-6 object-contain" alt="{{ m.label }} icon" />
            <span class="tracking-wide text-gray-700 font-medium">{{ m.label }}</span>
          </div>

          @if (m.submenu.length > 0) {
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" [ngClass]="m.isSelected ? 'rotate-180' : ''"
            class="transition-transform duration-200">
            <path d="M19 9L12 16L5 9" stroke="currentColor" stroke-width="2" stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
          }
        </div>

        <!-- Submenu -->
        @if (m.submenu.length > 0 && m.isSelected) {
        <div class="pl-4 mt-1 space-y-1 overflow-hidden transition-all duration-300">
          @for (s of m.submenu; track $index; let subIndex = $index) {
          <div (click)="selectMenu(parentIndex, true, subIndex)"
            [ngClass]="s.isSelected ? 'bg-blue-100 text-blue-700' : 'hover:bg-gray-100'"
            class="rounded-lg px-4 flex items-center h-10 cursor-pointer transition-all duration-200">
            <div class="flex items-center gap-3">
              <img [src]="s.icon" class="h-4 w-5 object-contain" alt="{{ s.label }} icon" />
              <span class="tracking-wide text-sm">{{ s.label }}</span>
            </div>
          </div>
          }
        </div>
        }
      </div>
      }
    </aside>

    <main class="flex-1 bg-slate-50 p-5 overflow-auto shadow-inner">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
} @else {
<div class="min-h-screen bg-gray-100">
  <router-outlet></router-outlet>
</div>
}